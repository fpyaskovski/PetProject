<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <title>Республика Алтайдыҥ ада-тӧрӧл музейи | Этнический музей Республики Алтай</title>
    <link rel="preload" href="styles.css" as="style">
    <link rel="stylesheet" href="styles.css">
    <script src="https://vk.com/js/api/openapi.js?169"></script>
</head>
<body>
    <!-- Навигация -->
    <nav class="nav" aria-label="Основная навигация">
        <div class="nav-links">
            <a href="#home">Тӧрӧл<br><small>Главная</small></a>
            <a href="#gallery">Кӧрӱмдердиҥ jыйнагы<br><small>Галерея</small></a>
            <a href="#booking">Бронь этип алыш<br><small>Бронирование</small></a>
            <a href="#downloads">Аштыҥ тизмези<br><small>Меню</small></a>
            <a href="#contact">Јарыштыру јолдоры<br><small>Контакты</small></a>
        </div>
        <img src="./my_folder/logo.jpg" 
             class="nav-logo" 
             alt="Логотип музея"
             loading="lazy"
             decoding="async">
    </nav>

    <!-- Основной контент -->
    <main>
        <!-- Секция "Главная" -->
        <section id="home">
            <h1>Кайырлу болзын Алтайдыҥ учун jаткан јерге!<br><small>Добро пожаловать в этнический музей Алтая</small></h1>
            <div class="content-wrapper">
                <img src="./my_folder/logotext.jpg" 
                     alt="Музей" 
                     class="main-image"
                     loading="lazy"
                     decoding="async">
                <div class="text-content">
                    <h3>Тубалары («туба», тува, тума-кижи) - этническая группа северных алтайцев... [полный текст]</h3>
                </div>
            </div>
        </section>

        <!-- Секция "Галерея" -->
        <section id="gallery">
            <h2>Кӧрӱмдердиҥ jыйнагы<br><small>Галерея</small></h2>
            <!-- Превью видео -->
             <div class="video-wrapper">
       <div class="video-preview" 
     data-video-src="https://vk.com/video_ext.php?oid=535236440&id=456239630&hash=abc123" <!-- Ваша прямая ссылка -->
     onclick="openVideoModal(this)">
            <img src="./my_folder/logo.jpg" 
                 alt="Превью видео" 
                 loading="lazy"
                 decoding="async">
            <div class="play-button"></div>
        </div>
    </div>

            <!-- Галерея изображений -->
        <!-- Галерея -->
<div class="gallery-container">
    <img src="images/img1.jpg" alt="Экспонат" class="gallery-item" loading="lazy">
    <img src="images/img2.jpg" alt="Интерьер" class="gallery-item" loading="lazy">
    <img src="images/img3.jpg" alt="Артефакты" class="gallery-item" loading="lazy">
    <img src="images/img4.jpg" alt="Одежда" class="gallery-item" loading="lazy">
    <img src="images/img5.jpg" alt="Экспозиция" class="gallery-item" loading="lazy">
    <img src="images/img6.jpg" alt="День КМН" class="gallery-item" loading="lazy">
    <img src="images/img7.jpg" alt="Ловкая кыс" class="gallery-item" loading="lazy">
    <img src="images/img8.jpg" alt="Гордость" class="gallery-item" loading="lazy">
</div>
        </section>

        <!-- Секция "Бронирование" -->
        <section id="booking">
            <h2>Бронь этип алыш<br><small>Онлайн-Бронирование</small></h2>
            <div class="booking-grid">
                <div class="booking-card">
                    <h3>Экскурсиялар<br><small>Экскурсии</small></h3>
                    <form id="tourForm">
                        <input type="date" name="date" required aria-label="Дата экскурсии">
                        <input type="number" name="people" placeholder="Количество человек" required>
                        <input type="tel" name="phone" pattern="\+7[0-9]{10}" placeholder="+7XXXXXXXXXX" required>
                        <button type="submit">Экскурсияны броньлап алуру<br><small>Забронировать экскурсию</small></button>
                    </form>
                </div>
                <div class="booking-card">
                    <h3>Туруш<br><small>Проживание</small></h3>
                    <form id="hotelForm">
                        <input type="date" name="checkin" placeholder="Заезд" required>
                        <input type="date" name="checkout" placeholder="Выезд" required>
                        <input type="number" name="guests" placeholder="Количество гостей" required>
                        <input type="tel" name="phone" pattern="\+7[0-9]{10}" placeholder="+7XXXXXXXXXX" required>
                        <button type="submit">Орунны jатты болуру<br><small>Забронировать номер</small></button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Секция "Меню" -->
        <section id="downloads">
            <h2>Аштыҥ тизмези<br><small>Меню</small></h2>
            <div class="downloads-container">
                <div class="download-card">
                    <img src="./my_folder/menu.jpg" alt="PDF" class="pdf-icon">
                    <div class="download-info">
                        <h3>Ада-тӧрӧл аштар<br><small>National cuisine</small></h3>
                        <p>Традиционные блюда тубаларов<br><small>Тубалардыҥ ада-тӧрӧл аштары</small> (0.35 МБ)</p>
                        <div class="button-group">
                            <a href="./my_folder/menu.pdf" target="_blank" rel="noopener noreferrer" class="preview-btn">
                                Ознакомиться<br><small>Кӧрӱп алуру</small>
                            </a>
                            <a href="./my_folder/menu.pdf" class="download-btn">PDF-ди јууктап алуру <br><small>Скачать PDF</small></a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Секция "Контакты" -->
        <section id="contact">
            <h2>Јарыштыру јолдоры<br><small>Контакты</small></h2>
            <div class="content-wrapper contact-wrapper">
                <div class="text-content">
                    <h3>Пясковская Айтана</h3>
                    <button class="telegram-btn" onclick="window.open('https://t.me/Aitana_altay')">
                        Телеграмга бичиир<br><small>Написать в Telegram</small>
                    </button>
                </div>
                <img src="./my_folder/photo_1.jpg" 
                     alt="Пясковская Айтана" 
                     class="contact-image"
                     loading="lazy"
                     decoding="async">
            </div>
        </section>
    </main>

    <!-- Модальные окна -->
    <div class="modal-overlay" id="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <img src="" alt="" class="modal-image">
        </div>
    </div>

    <!-- Виджет VK -->
  <div class="video-modal" id="videoModal">
    <div class="video-modal-content">
        <span class="modal-close" onclick="closeVideoModal()">&times;</span>
        <video controls id="videoPlayer" class="video-iframe-container">
            <source src="" type="video/mp4">
        </video>
    </div>
</div>

    <!-- Социальные сети -->
    <div class="social-block">
        <div class="social-links">
            <a href="https://t.me/gotoaltay" class="social-link" target="_blank" rel="noopener noreferrer">
                <img src="./my_folder/icons/Telegram_2019_Logo.svg" alt="Telegram" class="social-icon">
                Телеграм
            </a>
            <a href="https://vk.com/tubalaryaltay" class="social-link" target="_blank" rel="noopener noreferrer">
                <img src="./my_folder/icons/VK.com-logo.svg" alt="ВКонтакте" class="social-icon">
                ВКонтакте
            </a>
            <a href="https://ok.ru/profile/575194033870" class="social-link" target="_blank" rel="noopener noreferrer">
                <img src="./my_folder/icons/Odnoklassniki.svg" alt="Одноклассники" class="social-icon">
                Одноклассники
            </a>
        </div>
    </div>

    <!-- Скрипты -->
    <script>
        // Инициализация виджета VK
        window.onload = function() {
            VK.Widgets.Playlist(
                "vk-video-widget", 
                -535236440,  // ID сообщества
                456239630,   // ID видео
                {
                    width: "100%",
                    height: "450",
                    mode: "inline"
                }
            );
        };

        // Обработчики форм и модалок
        const init = () => {
            const BOT_TOKEN = '7501814156:AAG7FHBSqWoucLC_nB-l6O7Bk1KEe4EM91c';
            const CHAT_ID = '284561200';
            
            const modalHandler = () => {
                const modal = document.getElementById('modal');
                const closeModal = () => modal.style.display = 'none';
                
                document.querySelectorAll('.gallery-item').forEach(item => {
                    item.addEventListener('click', () => {
                        modal.style.display = 'flex';
                        document.querySelector('.modal-image').src = item.src;
                    });
                });

                document.querySelector('.modal-close').addEventListener('click', closeModal);
            };

            const formSubmitHandler = (formId, title) => {
                document.getElementById(formId).addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const formData = new FormData(e.target);
                    try {
                        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                            method: 'POST',
                            headers: {'Content-Type': 'application/json'},
                            body: JSON.stringify({
                                chat_id: CHAT_ID,
                                text: `${title}:\n${[...formData].map(([k,v]) => `${k}: ${v}`).join('\n')}`
                            })
                        });
                        alert('Заявка отправлена!');
                        e.target.reset();
                    } catch {
                        alert('Ошибка отправки!');
                    }
                });
            };

            modalHandler();
            formSubmitHandler('tourForm', 'Новая экскурсия');
            formSubmitHandler('hotelForm', 'Бронь проживания');
        };

        // Функции для видео
const openVideoModal = (element) => {
    const videoSrc = element.getAttribute('data-video-src');
    const videoHTML = `
        <video controls autoplay class="video-player">
            <source src="${videoSrc}" type="video/mp4">
            Ваш браузер не поддерживает видео тег.
        </video>
    `;
    document.getElementById('videoContainer').innerHTML = videoHTML;
    document.getElementById('videoModal').style.display = 'flex';
};

        window.onclick = (e) => {
            if (e.target === document.getElementById('videoModal')) closeVideoModal();
            if (e.target === document.getElementById('modal')) document.getElementById('modal').style.display = 'none';
        };

        document.addEventListener('keydown', (e) => e.key === 'Escape' && closeVideoModal());

        document.addEventListener('DOMContentLoaded', init);
        // Автоматическое добавление класса "loaded" для изображений галереи
document.addEventListener("DOMContentLoaded", function() {
    const galleryItems = document.querySelectorAll('.gallery-item');
    
    galleryItems.forEach(img => {
        // Проверка, загружено ли изображение
        if (img.complete) {
            img.classList.add('loaded');
        } else {
            img.addEventListener('load', () => {
                img.classList.add('loaded');
            });
        }
    });
});
    </script>
</body>
</html>
